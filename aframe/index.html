<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Hello, WebVR! • A-Frame</title>
    <meta
        name="description"
        content="Hello, WebVR! • A-Frame"
    />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>

<body>

    <script>
        AFRAME.registerComponent('modify-materials', {
          init: function () {
            // Wait for model to load.
            this.el.addEventListener('model-loaded', () => {
              // Grab the mesh / scene.
              const obj = this.el.getObject3D('mesh');
              // Go over the submeshes and modify materials we want.
              obj.traverse(node => {
                if (node.name.indexOf('settimino') !== -1) {
                  node.material.color.set('red');
                }
              });
            });
          }
        });
      </script>


    <a-scene background="color: #ECECEC">

        <a-entity
            light="type: point"
            position="0 2.396 0"
        ></a-entity>

        <a-assets>
            <img
                id="parquet"
                src="assets/parquet.png"
            />
            <img
                id="stucco"
                src="assets/stucco.jpg"
            />
            <img
                id="stucco-nrm"
                src="assets/stucco-nrm.jpg"
            />
            <a-asset-item
                id="settimino"
                src="assets/COM 6 CASS 45 DM24351.gltf"
            ></a-asset-item>
        </a-assets>

        <a-entity
            gltf-model="#settimino"
            modify-materials
            shadow
        ></a-entity>

        <a-box
            position="-0.67576 1.27008 -1.68792"
            width="2.50"
            height="2.6"
            depth=".6"
            material=""
        ></a-box>

        <!-- Room -->
        <a-box
            material="src: #stucco; 
                metalness: 0;
                normal-map: #stucco-nrm; 
                normal-texture-repeat: 1 1; 
                repeat: 1 1; 
                roughness: .9;
                side: back;
            "
            position="0 1.4 0"
            scale="-1 1 1"
            width="3.73"
            height="2.8"
            depth="3.73"
            side="double"
        ></a-box>
        <a-plane
            material="src: #parquet; roughness: .1"
            position="0 .01 0"
            rotation="-90 0 0"
            width="3.73"
            height="3.73"
            color="#ffffff"
        ></a-plane>
    </a-scene>
</body>

</html>